# iPhoneで競輪予測アプリを使う - クイックスタート

このガイドでは、iPhoneで競輪予測アプリを使う方法を説明します。

## 📋 必要なもの

- iPhone（iOS 11.3以降、Safari）
- PC（Windows、Mac、Linux）
- 同じWi-Fiネットワーク

## 🚀 起動方法

### ステップ1: PCでサーバーを起動

#### Mac/Linux の場合:
```bash
./start.sh
```

#### Windows の場合:
```cmd
start.bat
```

または、手動で起動:
```bash
python backend/app.py
```

### ステップ2: iPhoneとPCを同じWi-Fiに接続

1. iPhoneの「設定」→「Wi-Fi」を開く
2. PCと同じWi-Fiネットワークに接続する

### ステップ3: iPhoneからアクセス

1. **サーバー起動時に表示されるIPアドレスをメモ**

   例: `http://192.168.1.100:5000`

2. **iPhoneのSafariを開く**

3. **アドレスバーにURLを入力**

   起動スクリプトに表示されたURL（例: `http://192.168.1.100:5000`）を入力

4. **アプリが表示されます！**

## 📱 PWAとしてホーム画面に追加（推奨）

アプリをネイティブアプリのように使うために、ホーム画面に追加できます。

### 手順:

1. **Safariでアプリを開く**

2. **画面下部の「共有」ボタンをタップ**

   ![共有ボタン](https://support.apple.com/library/content/dam/edam/applecare/images/en_US/ios/ios15-iphone-12-pro-safari-share-icon.png)

   ※ 四角から上向き矢印が出ているアイコン

3. **「ホーム画面に追加」を選択**

   下にスクロールすると見つかります

4. **アプリ名を確認して「追加」をタップ**

5. **ホーム画面にアイコンが追加されます！**

### PWAのメリット:

✅ ネイティブアプリのように起動
✅ フルスクリーン表示
✅ ホーム画面から直接アクセス
✅ アドレスバーが非表示

## 🎯 使い方

### 1. 基本情報を入力

- **場名**: プルダウンから選択
- **グレード**: F1、F2、G1など
- **カテゴリー**: A級予選、S級決勝など
- **レース番号**: 1〜12

### 2. 着順予想を入力（1〜3着）

**必須項目:**
- 車番（1〜9）

**任意項目:**
- 選手名
- 決まり手（捲り、差し、逃げ、マーク）

### 3. 予測する

「予測する」ボタンをタップ

### 4. 結果を確認

**表示される情報:**

- **高配当の確率**（%）
  - プログレスバーで視覚的に表示
  - 「荒れる」または「堅い」の判定

- **買い方の提案**
  - 信頼度（高/中/低）
  - 推奨券種（3連単、3連複、2連複、ワイド）
  - 推奨車番
  - 買い方（ボックス、フォーメーション、通常）

## 🔧 トラブルシューティング

### アクセスできない場合

**1. Wi-Fi接続を確認**
- iPhoneとPCが同じWi-Fiに接続されているか確認
- モバイルデータではなくWi-Fiを使用

**2. IPアドレスを確認**

Mac/Linux:
```bash
hostname -I
# または
ifconfig | grep "inet "
```

Windows:
```cmd
ipconfig
```

**3. ファイアウォールを確認**

PCのファイアウォールがポート5000をブロックしていないか確認

Mac:
```bash
# ファイアウォール設定を確認
# システム環境設定 → セキュリティとプライバシー → ファイアウォール
```

Windows:
```cmd
# Windowsファイアウォールで5000ポートを許可
netsh advfirewall firewall add rule name="Keirin App" dir=in action=allow protocol=TCP localport=5000
```

**4. サーバーが起動しているか確認**

PCで以下にアクセスして確認:
```
http://localhost:5000
```

### ページが表示されない

- Safariのキャッシュをクリア
- iPhoneを再起動
- サーバーを再起動

### PWAがインストールできない

- SafariでHTTPSでない場合、一部機能が制限される場合があります
- iOS 11.3以降が必要です
- Safariブラウザを使用してください（Chrome、Firefoxでは不可）

### 予測エラーが出る

- すべての必須項目（場名、グレード、カテゴリー、車番）が入力されているか確認
- サーバーのログを確認
- モデルファイルが正しく生成されているか確認

## 💡 使用例

### 例1: 高配当狙い

**入力:**
- 場名: 京王閣
- グレード: F1
- カテゴリー: A級予選
- レース番号: 1
- 1着車番: 7
- 2着車番: 9
- 3着車番: 1

**予測結果:**
- 確率: 72%
- 判定: 荒れる
- 提案: 3連単ボックス（7-9-1）

### 例2: 堅いレース

**入力:**
- 場名: 立川
- グレード: G1
- カテゴリー: S級決勝
- レース番号: 12
- 1着車番: 1
- 2着車番: 2
- 3着車番: 3

**予測結果:**
- 確率: 18%
- 判定: 堅い
- 提案: 2連複（1-2）、ワイド（1-2）

## 🔒 セキュリティについて

- このアプリはローカルネットワーク内でのみ動作します
- インターネットには公開されません
- データは外部に送信されません
- 予測結果はあくまで参考値です

## 📚 さらに詳しく

詳細な情報は以下を参照:
- [README_APP.md](README_APP.md) - アプリの詳細仕様
- [README.md](README.md) - プロジェクト全体の説明

## 🆘 サポート

問題が解決しない場合は、GitHubのIssuesで報告してください。
